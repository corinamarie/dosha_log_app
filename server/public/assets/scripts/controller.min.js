/*! dosha_log_app 2015-09-29 */
var vataCount=0,pittaCount=0,kaphaCount=0,userDoshaResults={},doshaType,dosha;doshApp.controller("DoshaController",["$scope","$location",function(a,b){a.testing="we're up!",a.changeRoute=function(a){b.path(a)}}]),doshApp.controller("ResultsController",["$scope","$http",function(a,b){a.vataCount=vataCount,a.pittaCount=pittaCount,a.kaphaCount=kaphaCount,a.doshaType=doshaType,a.getData=function(){b.get("/getData").then(function(b){if(200!==b.status)throw new Error("failed to retrieve data from server");a.userHistory=b.data,console.log("this is scope.history: ",a.userHistory)})},a.getData()}]),doshApp.controller("QuizController",["$scope","$location","$http",function(a,b,c){vataCount=0,pittaCount=0,kaphaCount=0,a.questions=[{question:"faith",answer:{vata:"variable, erratic",pitta:"strong, determined",kapha:"steady, slow to change"},show:!0},{question:"faith2",answer:{vata:"variable, erratic",pitta:"strong, determined",kapha:"steady, slow to change"},show:!1}],a.slideCounter=0,a.changeRoute=function(a){b.path(a)},a.vataBtnCounter=function(){vataCount+=1,a.quizResult(),a.nextQuestion(),a.slideCounter+=1},a.pittaBtnCounter=function(){pittaCount+=1,a.quizResult(),a.nextQuestion(),a.slideCounter+=1},a.kaphaBtnCounter=function(){kaphaCount+=1,a.quizResult(),a.nextQuestion(),a.slideCounter+=1},a.currentQuestionCard=a.questions[a.slideCounter],a.currentDisplayStatus=a.questions[a.slideCounter].show,a.currentQuestion=a.questions[a.slideCounter].question,a.nextQuestion=a.questions[a.slideCounter+1].question,a.postResults=function(){var b=userDoshaResults.quizresults,d=a.dosha(vataCount,pittaCount,kaphaCount),e={doshabalance:d,quizresults:b};c.post("/create",e).then(function(a,b,c){if(200!==b.status)throw new Error("failed to retrieve data from server")})},a.quizResult=function(){return userDoshaResults.quizresults={vatapts:vataCount,pittapts:pittaCount,kaphapts:kaphaCount},userDoshaResults.quizresults},a.dosha=function(a,b,c){return a>b&&a>c?doshaType="vata":b>a&&b>c?doshaType="pitta":c>b&&c>a?doshaType="kapha":c==b&&b==a?doshaType="tridoshic":c==b&&c!==a?doshaType="kapha pitta":b==a&&b!==c?doshaType="pitta vata":c==a&&c!==b&&(doshaType="vata kapha"),doshaType},a.nextQuestion=function(){a.slideCounter<a.questions.length-1?(a.questions[a.slideCounter].show=!1,a.questions[a.slideCounter+1].show=!0):(a.changeRoute("/results"),a.postResults())}}]);