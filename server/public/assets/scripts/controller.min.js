/*! dosha_log_app 2015-09-28 */
var vataCount=0,pittaCount=0,kaphaCount=0,userDoshaResults={};doshApp.controller("DoshaController",["$scope","$location",function(a,b){console.log("dosha controller is up"),a.testing="we're up!",a.changeRoute=function(a){b.path(a)}}]),doshApp.controller("ResultsController",["$scope",function(a){console.log("results controller is up"),console.log(userDoshaResults),a.vataCount=vataCount,a.pittaCount=pittaCount,a.kaphaCount=kaphaCount}]),doshApp.controller("QuizController",["$scope","$location","$http",function(a,b,c){console.log("quiz controller is up"),vataCount=0,pittaCount=0,kaphaCount=0,a.questions=[{question:"faith",answer:{vata:"variable, erratic",pitta:"strong, determined",kapha:"steady, slow to change"},show:!0},{question:"faith2",answer:{vata:"variable, erratic",pitta:"strong, determined",kapha:"steady, slow to change"},show:!1}],a.slideCounter=0,console.log("slideCounter var: ",a.slideCounter),a.changeRoute=function(a){b.path(a)},a.vataBtnCounter=function(){vataCount+=1,console.log("vata points: "+vataCount),a.quizResult(),a.nextQuestion(),a.slideCounter+=1},a.pittaBtnCounter=function(){pittaCount+=1,a.quizResult(),a.nextQuestion(),a.slideCounter+=1},a.kaphaBtnCounter=function(){kaphaCount+=1,a.quizResult(),a.nextQuestion(),a.slideCounter+=1},a.currentQuestionCard=a.questions[a.slideCounter],a.currentDisplayStatus=a.questions[a.slideCounter].show,a.currentQuestion=a.questions[a.slideCounter].question,a.nextQuestion=a.questions[a.slideCounter+1].question,a.getData=function(){c.get("/getData").then(function(a){if(200!==a.status)throw new Error("failed to retrieve data from server")})},a.getData(),a.postResults=function(){var b=userDoshaResults.quizresults,d=a.dosha(vataCount,pittaCount,kaphaCount);console.log("this is the postresults console: ",d);var e={doshabalance:d,quizresults:b};c.post("/create",e).then(function(a,b,c){if(200!==b.status)throw new Error("failed to retrieve data from server");console.log("the post call worked! the req var = ",a),console.log("the post call worked! the data var = ",e)})},a.quizResult=function(){return userDoshaResults.quizresults={vatapts:vataCount,pittapts:pittaCount,kaphapts:kaphaCount},userDoshaResults.quizresults},a.dosha=function(a,b,c){var d;return a>b&&a>c?d="vata":b>a&&b>c?d="pitta":c>b&&c>a?d="kapha":c==b&&b==a?d="tridoshic":c==b&&c!==a?d="kapha pitta":b==a&&b!==c?d="pitta vata":c==a&&c!==b&&(d="vata kapha"),d},a.nextQuestion=function(){a.slideCounter<a.questions.length-1?(a.questions[a.slideCounter].show=!1,a.questions[a.slideCounter+1].show=!0):(a.changeRoute("/results"),a.postResults())}}]);